<!DOCTYPE html>
<html>
<head>
  <title>To-Do List</title>
  <style>
    table, th, td {
      border: 0px solid green;
      border-collapse: collapse;
      padding: 6px;
    }
  </style>
</head>
<body>
  <table>
    <tr>
        <td><label>Date:</label></td>
        <td><input type="date" id="date"></td>
    </tr>
    <tr>
        <td><label>ToDo: </label></td>
        <td><input type="text" id="todo"></td>
    </tr>
    <tr>
        <td><label>Target Date & Time:</label></td>
        <td><input type="datetime-local" id="target"></td>
    </tr>
    <tr>
        <td><label>Status: </label></td>
        <td><input type="text" id="status" disabled></td>
    </tr>
    <tr>
        <td></td>
        <td><button onclick="addNewTodo()">SUBMIT</button></td>
    </tr>
  </table>
  <br>
  <table id="todoTable" border="1" style="width:100%">
      <thead>
      <tr>
        <th>ID</th>
        <th>ToDo Desc</th>
        <th>Target Date</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      </tbody>
  </table>
  <script>
    var todoList=[
      {
        todoId:35,
        todoDesc : "complete the project",
        targetDate : "2025-07-30 11:35",
        todoStatus : "PENDING",
        createDate : "2025-07-29 10:00"
      },
      {
        todoId:9,
        todoDesc : "review the code",
        targetDate : "2025-07-30 12:40",
        todoStatus : "COMPLETE",
        createDate : "2025-07-29 10:00"
      },
      {
        todoId:5,
        todoDesc : "test the application",
        targetDate : "2025-07-30 1:40",
        todoStatus : "IN-PROGRESS",
        createDate : "2025-07-29 10:00"
      }
    ];

    function getMaxTodoId(max, value) {
      return max.todoId > value.todoId ? max : value;
    }
    var maxObj = todoList.reduce(getMaxTodoId);
    var todoId = maxObj.todoId;

    var editIndex = null; // Track which item is being edited

    function renderListTable(value, index, array){
      var newTodoTr = document.createElement("tr");

      var newTodoIdTd = document.createElement("td");
      newTodoIdTd.innerText = value.todoId;

      var newTodoDescTd = document.createElement("td");
      newTodoDescTd.innerText = value.todoDesc;

      var newTodoTargetDateTd = document.createElement("td");
      newTodoTargetDateTd.innerText = value.targetDate;

      var newTodoStatusTd = document.createElement("td");
      newTodoStatusTd.innerText = value.todoStatus;

      // Actions cell
      var actionsTd = document.createElement("td");

      // Edit button
      var editBtn = document.createElement("button");
      editBtn.innerText = "Edit";
      editBtn.onclick = function() {
        document.getElementById("todo").value = value.todoDesc;
        document.getElementById("target").value = value.targetDate;
        document.getElementById("status").value = value.todoStatus;
        editIndex = index;
      };
      actionsTd.appendChild(editBtn);

      // Pending button
      var pendingBtn = document.createElement("button");
      pendingBtn.innerText = "Pending";
      pendingBtn.disabled = value.todoStatus === "PENDING";
      pendingBtn.onclick = function() {
        value.todoStatus = "PENDING";
        renderTodoItems(todoList);
      };
      actionsTd.appendChild(pendingBtn);

      // In-Progress button
      var inProgressBtn = document.createElement("button");
      inProgressBtn.innerText = "In-Progress";
      inProgressBtn.disabled = value.todoStatus === "IN-PROGRESS";
      inProgressBtn.onclick = function() {
        value.todoStatus = "IN-PROGRESS";
        renderTodoItems(todoList);
      };
      actionsTd.appendChild(inProgressBtn);

      // Complete button
      var completeBtn = document.createElement("button");
      completeBtn.innerText = "Complete";
      completeBtn.disabled = value.todoStatus === "COMPLETE";
      completeBtn.onclick = function() {
        value.todoStatus = "COMPLETE";
        renderTodoItems(todoList);
      };
      actionsTd.appendChild(completeBtn);

      newTodoTr.appendChild(newTodoIdTd);
      newTodoTr.appendChild(newTodoDescTd);
      newTodoTr.appendChild(newTodoTargetDateTd);
      newTodoTr.appendChild(newTodoStatusTd);
      newTodoTr.appendChild(actionsTd);

      var todoTableBody = document.getElementById("todoTable").getElementsByTagName("tbody")[0];
      todoTableBody.appendChild(newTodoTr);
    }

    function renderTodoItems(todoList){
      var todoTableBody = document.getElementById("todoTable").getElementsByTagName("tbody")[0];
      todoTableBody.innerHTML = "";
      todoList.forEach(renderListTable);
    }
    renderTodoItems(todoList);

    function addNewTodo() {
      var todoDesc = document.getElementById("todo").value;
      var targetDate = document.getElementById("target").value;
      var todoStatus = document.getElementById("status").value || "PENDING";
      if (editIndex !== null) {
        // Update existing
        todoList[editIndex].todoDesc = todoDesc;
        todoList[editIndex].targetDate = targetDate;
        todoList[editIndex].todoStatus = todoStatus;
        editIndex = null;
      } else {
        // Add new
        todoId++;
        var todo = {
          todoId: todoId,
          todoDesc: todoDesc,
          targetDate: targetDate,
          todoStatus: todoStatus,
          createDate: new Date().toLocaleString()
        };
        todoList.push(todo);
      }
      document.getElementById("todo").value = "";
      document.getElementById("target").value = "";
      document.getElementById("status").value = "";
      renderTodoItems(todoList);
    }
  </script>
</body>
</html>
        
